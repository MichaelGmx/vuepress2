<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.46">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="manifest" herf="/manifest.webmanifest"><meta name="theme-color" content="#3eaf7c"><title>angularjs Directive中的scope设置 | 小麦片</title><meta name="description" content="小麦片 笔记">
    <link rel="modulepreload" href="/vuepress2/assets/app.eb229427.js"><link rel="modulepreload" href="/vuepress2/assets/angularjs-directive-scope.html.bef4ec30.js"><link rel="modulepreload" href="/vuepress2/assets/angularjs-directive-scope.html.7286124f.js"><link rel="prefetch" href="/vuepress2/assets/index.html.1da704de.js"><link rel="prefetch" href="/vuepress2/assets/android-build-error.html.f5db3b9c.js"><link rel="prefetch" href="/vuepress2/assets/index.html.80b47de5.js"><link rel="prefetch" href="/vuepress2/assets/git-cli.html.b8eba124.js"><link rel="prefetch" href="/vuepress2/assets/class.html.5c234c07.js"><link rel="prefetch" href="/vuepress2/assets/form.html.edaf3616.js"><link rel="prefetch" href="/vuepress2/assets/hook.html.3f34f43e.js"><link rel="prefetch" href="/vuepress2/assets/prop-types.html.16055d45.js"><link rel="prefetch" href="/vuepress2/assets/index.html.715711c8.js"><link rel="prefetch" href="/vuepress2/assets/vue-getting-started.html.17e5ff69.js"><link rel="prefetch" href="/vuepress2/assets/git-cli.html.bbff8ed8.js"><link rel="prefetch" href="/vuepress2/assets/react-router-dom5.x.html.1ee9aef8.js"><link rel="prefetch" href="/vuepress2/assets/react-router-dom6.x.html.1784240a.js"><link rel="prefetch" href="/vuepress2/assets/index.html.a06cac7b.js"><link rel="prefetch" href="/vuepress2/assets/404.html.93146c89.js"><link rel="prefetch" href="/vuepress2/assets/index.html.8fa522da.js"><link rel="prefetch" href="/vuepress2/assets/android-build-error.html.c20bde69.js"><link rel="prefetch" href="/vuepress2/assets/index.html.3dd938a2.js"><link rel="prefetch" href="/vuepress2/assets/git-cli.html.a3a5b507.js"><link rel="prefetch" href="/vuepress2/assets/class.html.78c8dc48.js"><link rel="prefetch" href="/vuepress2/assets/form.html.43c12fb4.js"><link rel="prefetch" href="/vuepress2/assets/hook.html.e16f65b1.js"><link rel="prefetch" href="/vuepress2/assets/prop-types.html.6ebc161e.js"><link rel="prefetch" href="/vuepress2/assets/index.html.4a84c68e.js"><link rel="prefetch" href="/vuepress2/assets/vue-getting-started.html.c26e70a4.js"><link rel="prefetch" href="/vuepress2/assets/git-cli.html.3ae391c5.js"><link rel="prefetch" href="/vuepress2/assets/react-router-dom5.x.html.46167131.js"><link rel="prefetch" href="/vuepress2/assets/react-router-dom6.x.html.a4e3fd0e.js"><link rel="prefetch" href="/vuepress2/assets/index.html.c485606c.js"><link rel="prefetch" href="/vuepress2/assets/404.html.65b92928.js"><link rel="prefetch" href="/vuepress2/assets/404.2b1afc48.js"><link rel="prefetch" href="/vuepress2/assets/Layout.f0788a91.js"><link rel="prefetch" href="/vuepress2/assets/index.0e8935cb.js">
    <link rel="stylesheet" href="/vuepress2/assets/style.e263b771.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/vuepress2/" class=""><img class="logo" src="/vuepress2/images/logo.jpg" alt="小麦片"><span class="site-name can-hide">小麦片</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/MichaelGmx/vuepress2" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">语言</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">语言</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/vuepress2/angular/angular-js/angularjs-directive-scope.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vuepress2/en/" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="切换 黑夜模式"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/MichaelGmx/vuepress2" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">语言</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">语言</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/vuepress2/angular/angular-js/angularjs-directive-scope.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vuepress2/en/" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">angularjs Directive中的scope设置 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/vuepress2/angular/angular-js/angularjs-directive-scope.html#例子" class="router-link-active router-link-exact-active sidebar-item" aria-label="例子"><!--[--><!--]--> 例子 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="angularjs-directive中的scope设置" tabindex="-1"><a class="header-anchor" href="#angularjs-directive中的scope设置" aria-hidden="true">#</a> angularjs Directive中的scope设置</h1><table><thead><tr><th style="text-align:center;">值</th><th style="text-align:center;">继承/隔离</th><th style="text-align:center;">理解</th><th style="text-align:center;">解释</th></tr></thead><tbody><tr><td style="text-align:center;">false</td><td style="text-align:center;">继承不隔离</td><td style="text-align:center;">使用父scope</td><td style="text-align:center;">父子同享同一作用域</td></tr><tr><td style="text-align:center;">true</td><td style="text-align:center;">继承且隔离</td><td style="text-align:center;">使用父scope，但只单向</td><td style="text-align:center;">子使用父作用域初始化，而后建立自己的作用域</td></tr><tr><td style="text-align:center;">{}</td><td style="text-align:center;">不继承且隔离</td><td style="text-align:center;">使用自己独立的scope</td><td style="text-align:center;">父子使用各自的作用域</td></tr></tbody></table><p><strong>@</strong> 方式局部属性用来访问 directive 外部环境定义的字符串值，主要是通过 directive 所在的标签属性绑定外部字符串值。这种绑定是单向的，即父 scope 的绑定变化，directive 中的 scope 的属性会同步变化，而隔离 scope 中的绑定变化，父 scope 是不知道的。 <strong>（父可以传子，子不可以传父）</strong></p><p><strong>=</strong> 通过 directive 的 attr 属性的值在局部 scope 的属性和父 scope 属性名之间建立双向绑定。 意思是，当你想要一个双向绑定的属性的时候，你可以使用=来引入外部属性。无论是改变父 scope 还是隔离 scope 里的属性，父 scope 和隔离 scope 都会同时更新属性值，因为它们是双向绑定的关系。 <strong>（互相传值）</strong></p><p><strong>&amp;</strong> 方式提供一种途经是 directive 能在父 scope 的上下文中执行一个表达式。此表达式可以是一个 function。 比如当你写了一个 directive，当用户点击按钮时，directive 想要通知 controller，controller 无法知道 directive 中发生了什么，也许你可以通过使用 angular 中的 event 广播来做到，但是必须要在 controller 中增加一个事件监听方法。 最好的方法就是让 directive 可以通过一个父 scope 中的 function，当 directive 中有什么动作需要更新到父 scope 中的时候，可以在父 scope 上下文中执行一段代码或者一个函数。 <strong>（子传父 表达式）</strong></p><h2 id="例子" tabindex="-1"><a class="header-anchor" href="#例子" aria-hidden="true">#</a> 例子</h2><p>实际运行一下例子更容易理解</p><p>html代码如下：</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ng-controller</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>MyCtrl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-directive</span> <span class="token attr-name">my-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{name}}<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">age</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">active-from-child</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>notifyToDoSomething()<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">child-invoke-value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getValueFormChild(keyName)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-directive</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>controller代码如下：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">.</span><span class="token function">controller</span><span class="token punctuation">(</span><span class="token string">&#39;MyCtrl&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;$scope&#39;</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">$scope</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $scope<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;dream&#39;</span><span class="token punctuation">;</span>
    $scope<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">29</span><span class="token punctuation">;</span>
    $scope<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&#39;Parent Value&#39;</span><span class="token punctuation">;</span>
    
    $scope<span class="token punctuation">.</span><span class="token function-variable function">notifyToDoSomething</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Child notify to do something&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    $scope<span class="token punctuation">.</span><span class="token function-variable function">getValueFormChild</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      $scope<span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    $scope<span class="token punctuation">.</span><span class="token function-variable function">getChange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>directive代码如下：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">&quot;myDirective&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">restrict</span><span class="token operator">:</span> <span class="token string">&#39;AE&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">scope</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;@myName&#39;</span><span class="token punctuation">,</span>                   <span class="token comment">// 单向绑定，父作用域可以操作子作用域</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token string">&#39;=&#39;</span><span class="token punctuation">,</span>                          <span class="token comment">// 双向绑定</span>
        <span class="token literal-property property">optionalParam</span><span class="token operator">:</span> <span class="token string">&#39;=?&#39;</span><span class="token punctuation">,</span>               <span class="token comment">// 此处表示optionalParam为可选，使用时未传入该属性，不会报错</span>
        <span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token string">&#39;&amp;activeFromChild&#39;</span><span class="token punctuation">,</span>        <span class="token comment">// 此处例子只让父作用域执行一个函数（目的是：通知父作用域执行某些操作）</span>
        <span class="token literal-property property">invokeValue</span><span class="token operator">:</span> <span class="token string">&#39;&amp;childInvokeValue&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 此处让父作用域执行一个带参数的函数（目的是：可以传值至父作用域，并执行一些操作）</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;div class=&quot;my-directive&quot;&gt;
          &lt;p&gt;Child name: {{name}}&lt;/p&gt;
          &lt;input type=&quot;text&quot; ng-model=&quot;name&quot;&gt;
          &lt;p&gt;Child age: {{age}}&lt;/p&gt;
          &lt;input type=&quot;text&quot; ng-model=&quot;age&quot;&gt;
          &lt;button ng-click=&quot;active()&quot;&gt;Notify Parent&lt;/button&gt;
          &lt;button ng-click=&quot;invokeValue({keyName: childValue})&quot;&gt;Change Value From Child&lt;/button&gt;
        &lt;/div&gt;
      </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token function-variable function">link</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">scope<span class="token punctuation">,</span> element<span class="token punctuation">,</span> attrs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        scope<span class="token punctuation">.</span>childValue <span class="token operator">=</span> <span class="token string">&#39;Child Value&#39;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://blog.coding.net/blog/angularjs-directive-isolate-scope" target="_blank" rel="noopener noreferrer">參考文章：AngularJS Directive 隔离 Scope 数据交互<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!----><!--]--></div>
    <script type="module" src="/vuepress2/assets/app.eb229427.js" defer></script>
  </body>
</html>
